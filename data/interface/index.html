<!DOCTYPE html>
<html lang="en">
  <head>
    <title>P2P File Transfer</title>
    <link rel="stylesheet" href="index.css">
    <meta http-equiv="content-language" content="en">
    <link rel="stylesheet" href="resources/sidebar.css">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <!-- -->
    <link rel="icon" sizes="64x64">
    <link rel="icon" sizes="48x48">
    <link rel="icon" sizes="32x32">
    <link rel="icon" sizes="16x16">
  </head>
  <body>
    <div class="reload" title="Reload Session">
      <svg width="12" height="12" viewBox="0 0 512 512">
        <path d="M281.525,228.102l104.758-78.042 c12.082-12.085,12.082-24.259,0-36.342L281.525,35.674c-3.274-2.359-7.359-3.725-11.723-3.725c-10.992,0-19.803,8.536-19.803,19.083  v35.429C144.611,86.737,59.205,172.046,59.205,277.258c0,105.396,85.672,190.793,191.248,190.793 c98.03,0,178.809-73.498,189.977-168.169c0.092-0.275,0.367-3.187,0.367-4.455c0-9.992-8.181-18.169-18.261-18.169h-45.793 c-14.993,0-26.349,10.355-27.893,18.986c-8.811,46.156-49.519,80.954-98.397,80.954c-55.329,0-100.127-44.701-100.127-99.94 c0-55.064,44.523-99.667,99.674-99.941v35.437c0,10.541,8.811,19.076,19.803,19.076C274.166,231.83,278.251,230.471,281.525,228.102 z"/>
      </svg>
    </div>
    <div class="reset" title="Reset App">
      <svg width="12" height="12" viewBox="0 0 48 48">
        <path d="M 9.8212753,13.365952 H 34.12766 V 20.455317 L 44.25532,10.327657 34.12766,0.199997 V 7.2893585 H 3.744681 V 22.987232 H 9.8212753 Z"/>
        <path d="M 38.178723,34.634044 13.872338,34.634037 13.872339,27.544678 3.744681,37.672337 13.872339,47.8 13.87234,40.710639 44.255317,40.710637 44.255318,25.012763 38.178724,25.012764 Z"/>
      </svg>
    </div>
    <div class="download" title="Download">
      <svg width="12" height="12" viewBox="0 0 23 27">
        <path d="M21.9,15c0,0-8.7,9.9-9.5,11c-0.9,1.1-2.3,0.3-2.3,0.3  s-8.8-9.7-9.8-11.4C-0.7,13.3,1.2,13,1.2,13H6V1c0-0.6,0.4-1,1-1h8c0.6,0,1,0.4,1,1v12h4.7C23.1,13,21.9,15,21.9,15z"/>
      </svg>
    </div>
    <div class="toolbar">
      <table>
        <tr>
          <td id="support" title="Open support page">
            <svg width="12" height="12" viewBox="0 0 1792 1792">
              <path d="M1088 1256v240q0 16-12 28t-28 12h-240q-16 0-28-12t-12-28v-240q0-16 12-28t28-12h240q16 0 28 12t12 28zm316-600q0 54-15.5 101t-35 76.5-55 59.5-57.5 43.5-61 35.5q-41 23-68.5 65t-27.5 67q0 17-12 32.5t-28 15.5h-240q-15 0-25.5-18.5t-10.5-37.5v-45q0-83 65-156.5t143-108.5q59-27 84-56t25-76q0-42-46.5-74t-107.5-32q-65 0-108 29-35 25-107 115-13 16-31 16-12 0-25-8l-164-125q-13-10-15.5-25t5.5-28q160-266 464-266 80 0 161 31t146 83 106 127.5 41 158.5z"/>
            </svg>
          </td>
        </tr>
        <tr>
          <td id="donation" title="Make a donation">
            <svg width="12" height="12" viewBox="-0.709 -11.555 141.732 141.732">
              <path d="M140.314,37.654C140.314,16.858,123.402,0,102.537,0c-13.744,0-25.77,7.317-32.379,18.255C63.549,7.317,51.521,0,37.777,0 C16.912,0,0,16.858,0,37.654c0,10.821,4.588,20.57,11.922,27.438h-0.01l54.084,51.584c0.992,1.188,2.48,1.945,4.148,1.945 c1.545,0,2.936-0.653,3.92-1.696l54.346-51.833h-0.016C135.729,58.225,140.314,48.476,140.314,37.654"/>
            </svg>
          </td>
        </tr>
      </table>
    </div>
    <div class="sidebar">
      <div id="page-wrapper">
        <div id="title"></div>
      </div>
      <div id="btn">
        <div id="top"></div>
        <div id="middle"></div>
        <div id="bottom"></div>
      </div>
      <div id="box">
        <div class="name">
          <div>Settings</div>
        </div>
    		<div id="items">
  				<div class="item" title="Show date and time (footer section)">
            <label for="datetime">I. Show date and time</label>
            <input type="checkbox" id="datetime"></input>
          </div>
          <!-- -->
          <div class="item" title="Download file(s) automatically when a peer shares a file.">
            <label for="automatic">II. Download file(s) automatically</label>
            <input type="checkbox" id="automatic"></input>
          </div>
          <!-- -->
          <div class="separator"></div>
          <!-- -->
          <div class="item" title="Server">
            <label for="server">Server</label>
            <textarea id="server" placeholder="Server address"></textarea>
          </div>
          <!-- -->
          <div class="item" title="Token">
            <label for="token">API key</label>
            <input id="token" type="password" placeholder="Server API key"></input>
          </div>
          <!-- -->
          <div class="description">
            <p>
              This app uses a WebSocket server for signaling purposes (connecting peers via WebRTC). 
              The default Websocket server is located at <b>replit.com</b>. 
              If you leave the API key area empty, it uses the default value.
            </p>
            <p>
              You can change the server to a desired one at any time. 
              Please enter a valid server address and related token in the above input fields. 
              All changes are auto-saved to the memory.
            </p>
          </div>
    		</div>
      </div>
    </div>
    <div class="container">
      <div class="dialog">
        <div class ="title">P2P File Transfer</div>
        <div class="button sender">Sender</div>
        <div class="logo"></div>
        <div class="button receiver">Receiver</div>
			</div>
      <div class="content">
        <details class="sender-section">
          <summary>Sender</summary>
          <div class="wrapper short">
            <span class="text">To start sharing files, please share this token with your peer(s).</span>
            <span class="token"></span>
          </div>
          <!-- -->
          <div class="wrapper long">
            <span class="text">To start sharing files, please do one of the following:</span>
            <span class="text">1. Share this token with your peer(s).</span>
            <span class="text">2. Scan the following QR code and follow the link.</span>
            <!-- -->
            <span class="token"></span>
            <span class="icon"></span>
            <span class="copy" title="Copy URL to the clipboard">
              <svg width="32" height="32" viewBox="0 0 24 24">
                <g transform="translate(-683.000000, -227.000000)">
                  <path d="M 688.98187,228.53232 V 231.86948 H 702.33052 V 245.21813 H 705.66768 V 228.53232 Z M 684.76261,233.98345 C 684.63585,233.98345 684.53232,234.0655 684.53232,234.16813 V 249.48301 C 684.53232,249.58492 684.63531,249.66768 684.76261,249.66768 H 699.98842 C 700.11519,249.66768 700.21655,249.58563 700.21655,249.48301 V 234.16813 C 700.21655,234.06621 700.11572,233.98345 699.98842,233.98345 Z"/>
                 </g>
              </svg>
            </span>
            <a class="link" href="" target="_blank"></a>
          </div>
        </details>
        <details class="receiver-section">
          <summary>Receiver</summary>
          <div class="wrapper">
            <span class="text">To start sharing files, please add the token from your peer to the area below and then press the - JOIN - button.</span>
            <input type="number" max="999999" placeholder="000000" required>
            <input type="button" value="JOIN" title="Press to join">
          </div>
        </details>
        <details class="fileio-section">
          <summary>Browse/Drag</summary>
          <div class="wrapper">
            <input type="file" id="inputfile">
            <span class="icon">
              <span class="progress-outer">
                <span class="progress-inner">
                  <span class="current"></span>
                  <!-- -->
                  <svg class="add" height="64" width="64" viewBox="0 0 122.8799 122.8799">
                    <rect width="117.37268" height="13.079653" x="2.4979999" y="54.916737"></rect>
                    <rect width="117.37268" height="13.079653" x="2.7702174" y="-67.724174" transform="rotate(90)"></rect>
                  </svg>
                  <!-- -->
                  <svg class="error" width="58" height="58" viewBox="0 0 192 512">
                    <path d="M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"/>
                  </svg>
                  <!-- -->
                  <svg class="sender" width="32" height="32" viewBox="0 0 16 16">
                    <path d="M 7,0.625 2.54,6 C 2.287,6.305 2,6.539 2,7 2,7.625 2.516,8 3,8 H 6 V 15 C 6,15.55 6.45,16 7,16 H 9 C 9.55,16 10,15.55 10,15 V 8 H 13 C 13.484,8 14,7.625 14,7 14,6.539 13.713,6.305 13.46,6 L 9,0.625 C 8.688,0.242 8.445,0 8,0 7.555,0 7.313,0.242 7,0.625 Z"/>
                  </svg>
                  <!-- -->
                  <svg class="receiver" width="32" height="32" viewBox="0 0 16 16">
                    <path d="M 7,15.375 2.54,10 C 2.287,9.695 2,9.461 2,9 2,8.375 2.516,8 3,8 H 6 V 1 C 6,0.45 6.45,0 7,0 H 9 C 9.55,0 10,0.45 10,1 V 8 H 13 C 13.484,8 14,8.375 14,9 14,9.461 13.713,9.695 13.46,10 L 9,15.375 C 8.688,15.758 8.445,16 8,16 7.555,16 7.313,15.758 7,15.375 Z"/>
                  </svg>
                  <!-- -->
                  <svg class="queue" width="58" height="58" viewBox="0 0 34 33">
                    <path d="M 2.1171875 0.26953125 C 1.4475068 0.26953125 0.90039063 0.82927141 0.90039062 1.5136719 L 0.90039062 8.8789062 C 0.90039062 9.563303 1.4475065 10.123048 2.1171875 10.123047 L 4.5527344 10.123047 C 5.2224128 10.123047 5.7695312 9.563303 5.7695312 8.8789062 L 5.7695312 1.5136719 C 5.7695312 0.82927141 5.2224124 0.26953125 4.5527344 0.26953125 L 2.1171875 0.26953125 z M 24.828125 0.26953125 C 24.158443 0.26953125 23.609375 0.83122205 23.609375 1.515625 L 23.609375 22.765625 L 19.957031 22.765625 C 19.367715 22.765625 18.738281 23.232045 18.738281 24.009766 C 18.738281 24.583427 19.090384 24.874369 19.398438 25.253906 L 24.828125 31.943359 C 25.209244 32.419935 25.503079 32.720703 26.044922 32.720703 C 26.586746 32.720703 26.881828 32.419935 27.261719 31.943359 L 32.693359 25.253906 C 33.00141 24.874369 33.349609 24.583427 33.349609 24.009766 C 33.349609 23.232045 32.72213 22.765625 32.132812 22.765625 L 28.480469 22.765625 L 28.480469 1.515625 C 28.480469 0.83122205 27.93141 0.26953125 27.261719 0.26953125 L 24.828125 0.26953125 z M 13.46875 0.32421875 C 12.799075 0.32421875 12.251953 0.88591047 12.251953 1.5703125 L 12.251953 18.189453 C 12.251953 18.873871 12.799075 19.431641 13.46875 19.431641 L 15.90625 19.431641 C 16.575947 19.431641 17.123047 18.873871 17.123047 18.189453 L 17.123047 1.5703125 C 17.123047 0.88591047 16.575947 0.32421875 15.90625 0.32421875 L 13.46875 0.32421875 z"/>
                  </svg>
                  <!-- -->
                  <svg class="nopeers" width="64" height="64" viewBox="0 0 24 24">
                    <g>
                      <path d="M20.7,19.3l-1-1c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l1,1c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3 C21.1,20.3,21.1,19.7,20.7,19.3z"/>
                      <path d="M14,22c0,0.6,0.4,1,1,1s1-0.4,1-1v-2c0-0.6-0.4-1-1-1s-1,0.4-1,1V22z"/>
                      <path d="M22,14h-2c-0.6,0-1,0.4-1,1s0.4,1,1,1h2c0.6,0,1-0.4,1-1S22.6,14,22,14z"/>
                      <path d="M20.7,8.4c0-1.4-0.5-2.6-1.5-3.6c-1-1-2.2-1.5-3.6-1.5S13,3.8,12,4.8L9.8,7c-0.4,0.4-0.4,1,0,1.4s1,0.4,1.4,0l2.2-2.2 c1.2-1.2,3.2-1.2,4.4,0c0.6,0.6,0.9,1.4,0.9,2.2c0,0.8-0.3,1.6-0.9,2.2l-2.2,2.2c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3 s0.5-0.1,0.7-0.3l2.2-2.2C20.2,11,20.7,9.8,20.7,8.4z"/>
                      <path d="M3.3,15.6c0,1.4,0.5,2.6,1.5,3.6c1,1,2.2,1.5,3.6,1.5s2.6-0.5,3.6-1.5l2.2-2.2c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-2.2,2.2 c-1.2,1.2-3.2,1.2-4.4,0c-0.6-0.6-0.9-1.4-0.9-2.2c0-0.8,0.3-1.6,0.9-2.2l2.2-2.2c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0L4.8,12 C3.8,13,3.3,14.2,3.3,15.6z"/>
                      <path d="M5.7,4.3l-1-1c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l1,1C4.5,5.9,4.7,6,5,6s0.5-0.1,0.7-0.3C6.1,5.3,6.1,4.7,5.7,4.3z"/>
                      <path d="M10,4V2c0-0.6-0.4-1-1-1S8,1.4,8,2v2c0,0.6,0.4,1,1,1S10,4.6,10,4z"/>
                      <path d="M4,10c0.6,0,1-0.4,1-1S4.6,8,4,8H2C1.4,8,1,8.4,1,9s0.4,1,1,1H4z"/>
                    </g>
                  </svg>
                  <!-- -->
                  <svg class="loader" height="22" viewBox="0 0 120 30">
                    <circle cx="15" cy="15" r="15">
                      <animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"/>
                      <animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="60" cy="15" r="9" fill-opacity="0.3">
                      <animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"/>
                      <animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="105" cy="15" r="15">
                      <animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"/>
                      <animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"/>
                    </circle>
                  </svg>
                </span>
              </span>
            </span>
            <span class="text"></span>
            <span class="time"></span>
          </div>
        </details>
      </div>
    </div>
    <div class="footer">
      <span id="status"></span>
      <span id="now"></span>
    </div>
    <!-- -->
    <script src="resources/protodefs.js"></script>
    <script src="resources/sidebar.js"></script>
    <script src="resources/engine.js"></script>
    <script src="vendor/qrcode.js"></script>
    <script src="index.js"></script>
  </body>
</html>
